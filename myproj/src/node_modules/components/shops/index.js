import React  from "react";
import {connect} from "react-redux";
import {getShops, getActiveShopId } from 'selectors'
import {Link} from "react-router-dom";
import {withRouter} from 'react-router'
import {compose} from "redux";
import * as R from 'ramda'



const Shops = ({shops, activeShopId}) => {
    console.log('activeShopId', activeShopId)
    const getActiveState = R.propEq('id', activeShopId)
    const renderShop = (shop, index) => {
        const linkClass = classNames({
            'list-group-item': true,
            'actve': getActiveState(shop)
        })
        return (
            <Link
                to={`/shops/${shop.id}`}
                className={linkClass}
                key={index}
            >
                {shop.name}
            </Link>
        )
    }
    const renderAllShops = () => {
        const linkClass = classNames({
            'list-group-item':true,
            'active': R.isNil(activeStoreId)
        })

        return(
            <Link to='/' className={linkClass}>All</Link>
        )
    }


    return (
        <div className='well'>
            <h4>Store</h4>
            <div className='list-group'>
                {renderAllShops()}
                {shops.map((shop, index) => renderShop(shop, index))}
            </div>
        </div>

    )
}

const mapStateToProps = (state, ownProps) => ({
    shops: getShops(state),
    activeShopId: getActiveShopId(ownProps)
})

export default compose(
    withRouter,
    connect(mapStateToProps, null)
)(Shops)
