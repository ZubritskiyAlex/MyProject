import React, {Component} from "react";
import {connect} from "react-redux";
import * as R from 'ramda'
import {Link} from 'react-router-dom'


import {fetchProducts, loadMoreProducts} from 'actions'
import Layout from 'containers/layout'

class Products extends Component{
    componentDidMount() {
        this.props.fetchProducts()
    }
renderProduct(product, index) {
        const shortDescription = `${R.take(60, product.description)}...`
        return(
          <div className='col-sm-4 col-lg-4 col-md-4 book-list' key={index}>
              <div className='thumbnail'>
                  <img
                    className='img-thumbnail'
                    src={product.image}
                    alt={product.name}
                  />
                  <div className='caption'>
                      <h4 className='pull-right'>${product.price}</h4>
                      <h4>
                          <Link to={`/products/${product.id}`}>
                              {product.name}
                          </Link>
                      </h4>
                      <p>{shortDescription}</p>
                      <p className='itemButton'>
                          <button className='btn btn-primary'>
                              Buy now!
                          </button>
                          <Link
                              to = {`/products/${product.id}`}
                              className='btn btn-default'
                              >
                              More info
                          </Link>
                      </p>
                  </div>
              </div>
          </div>
        )
    }
render() {
    const {products, LoadMoreProducts} = this.props
    return(
        <Layout>
        <div>
            <div className='books row'>
                {products.map((product, index) => this.renderProduct(product,index))}
            </div>
            <div className='row'>
                <div className='col-md-12'>
                    <button
                        onClick = {loadMoreProducts}
                        className = 'pull-right btn btn-primary'
                        >
                        Load More
                    </button>
                </div>
            </div>
        </div>

     )
  }
}

const mapStateToProps = state =>




const mapDispatchToProps = {
        fetchProducts
    }

export default connect(mapStateToProps, mapDispatchToProps)(Products)





